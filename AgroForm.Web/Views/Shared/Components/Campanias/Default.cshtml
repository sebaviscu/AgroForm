@using AgroForm.Web.Models.IndexVM
@model SelectorCampaniasVM

<div class="dropdown-campania" style="position: relative;">
    <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center w-100 justify-content-between py-2"
            type="button" id="campañasDropdown" data-bs-toggle="dropdown" aria-expanded="false">

        <i class="ph ph-calendar me-2"></i>

        <span id="campañaActualText">
            @{
                var campañas = Model.Campanias;
                var actual = campañas.FirstOrDefault(c => c.Id == Model?.IdCampaniaSeleccionada);
                var texto = string.IsNullOrWhiteSpace(actual?.Nombre)
                ? "Seleccionar campaña"
                : actual!.Nombre;
            }
            @texto
        </span>
    </button>

    <ul class="dropdown-menu dropdown-menu-start shadow border-0" aria-labelledby="campañasDropdown">

        @if (Model?.Campanias?.Any() == true)
        {
            foreach (var campaña in Model.Campanias)
            {
                <li>
                    <a class="dropdown-item d-flex justify-content-between align-items-center campaña-item"
                       href="#" data-campaña-id="@campaña.Id">
                        <div>
                            <i class="ph ph-check-circle-fill text-primary"></i>
                            <div class="fw-semibold">@campaña.Nombre</div>
                        </div>
                    </a>
                </li>
            }
        }
        else
        {
            <li class="text-center text-muted py-2 small">
                No hay campañas disponibles
            </li>
        }

    </ul>
</div>

<script src="~/js/views/selectorCampania.js" asp-append-version="true"></script>
